# Volumes Directory

This directory contains persistent mount points for Docker containers and optional initialization scripts.

## Directory Structure:

### `mariadb/`
- **Purpose**: MariaDB persistent data storage and optional init scripts
- **Persistent data**: Stored in Docker volume `mariadb_data`
- **Init scripts**: Optional SQL scripts in `mariadb/init/` (if needed)

### `projects/`
- **Purpose**: Per-project persistent storage directories
- **Structure**: `projects/{project-name}/{environment}/{storage|logs}`
- **Auto-created**: Generated by `create-project.sh` script
- **Permissions**: Configured for Laravel applications (www-data:www-data)

Example project volumes:
```
volumes/projects/
├── myapp/
│   ├── production/
│   │   └── storage/     # Laravel storage directory (includes logs/)
│   ├── staging/
│   │   └── storage/
│   └── development/
│       └── storage/
└── anotherapp/
    └── production/
        └── storage/
```

**Laravel Storage Structure:**
The mounted `/var/www/html/storage` directory contains:
- `app/` - Application files
- `framework/` - Framework cache/sessions/views  
- `logs/` - Laravel application logs (laravel.log)
- `public/` - Publicly accessible storage files

## Optional Database Initialization

If you need custom databases or users beyond what the install script creates, add SQL scripts to `mariadb/init/`:

```sql
-- Example: Create additional project databases
CREATE DATABASE IF NOT EXISTS myapp_production;
CREATE DATABASE IF NOT EXISTS myapp_staging;

-- Create project-specific users
CREATE USER IF NOT EXISTS 'myapp'@'%' IDENTIFIED BY 'secure_password';
GRANT ALL PRIVILEGES ON myapp_production.* TO 'myapp'@'%';
GRANT ALL PRIVILEGES ON myapp_staging.* TO 'myapp'@'%';
FLUSH PRIVILEGES;
```

## When to Use Init Scripts:

- ✅ **Multi-tenant setups** with many databases
- ✅ **Batch database creation** for multiple projects  
- ✅ **Custom user permissions** beyond defaults
- ❌ **Not needed for simple setups** - install script handles basics